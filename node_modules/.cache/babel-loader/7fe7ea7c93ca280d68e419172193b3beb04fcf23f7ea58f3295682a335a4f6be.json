{"ast":null,"code":"import axios from \"axios\";\nconst API_BASE_URL = \"http://localhost:8080\"; // adjust if backend runs elsewhere\n\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    \"Content-Type\": \"application/json\"\n  }\n});\n\n// Attach JWT token if available\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem(\"token\");\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n// Response interceptor for error handling\napi.interceptors.response.use(response => response, error => {\n  var _error$response;\n  if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n    localStorage.removeItem(\"token\");\n    window.location.href = \"/login\";\n  }\n  return Promise.reject(error);\n});\n\n// ========== AUTH APIs ==========\nexport const login = credentials => api.post(\"/auth/login\", credentials);\nexport const register = userData => api.post(\"/auth/register\", userData);\nexport const logout = () => api.post(\"/auth/logout\");\nexport const refreshToken = () => api.post(\"/auth/refresh\");\n\n// ========== USER APIs ==========\nexport const createUser = user => api.post(\"/users\", user);\nexport const getUser = id => api.get(`/users/${id}`);\nexport const getAllUsers = () => api.get(\"/users\");\nexport const updateUser = (id, user) => api.put(`/users/${id}`, user);\nexport const deleteUser = id => api.delete(`/users/${id}`);\nexport const getCurrentUser = () => api.get(\"/users/me\");\nexport const updateCurrentUser = data => api.put(\"/users/me\", data);\nexport const changePassword = data => api.put(\"/users/me/password\", data);\n\n// ========== DOCUMENT APIs ==========\nexport const createDocument = doc => api.post(\"/documents\", doc);\nexport const getMyDocuments = () => api.get(\"/documents/my\");\nexport const getAllDocuments = () => api.get(\"/documents\");\nexport const getDocumentById = id => api.get(`/documents/${id}`);\nexport const updateDocument = (id, doc) => api.put(`/documents/${id}`, doc);\nexport const deleteDocument = id => api.delete(`/documents/${id}`);\nexport const searchDocuments = query => api.get(`/documents/search?q=${query}`);\n\n// Upload file (multipart/form-data)\nexport const uploadFile = (file, folderId = null) => {\n  const formData = new FormData();\n  formData.append(\"file\", file);\n  if (folderId) {\n    formData.append(\"folderId\", folderId);\n  }\n  return api.post(\"/documents/upload\", formData, {\n    headers: {\n      \"Content-Type\": \"multipart/form-data\"\n    }\n  });\n};\n\n// Download file (response as Blob)\nexport const downloadFile = id => api.get(`/documents/download/${id}`, {\n  responseType: \"blob\"\n});\n\n// ========== FOLDER APIs ==========\nexport const createFolder = folder => api.post(\"/folders\", folder);\nexport const getFolder = id => api.get(`/folders/${id}`);\nexport const getAllFolders = () => api.get(\"/folders\");\nexport const getMyFolders = () => api.get(\"/folders/my\");\nexport const updateFolder = (id, folder) => api.put(`/folders/${id}`, folder);\nexport const deleteFolder = id => api.delete(`/folders/${id}`);\nexport const getFolderDocuments = id => api.get(`/folders/${id}/documents`);\n\n// ========== PERMISSION APIs ==========\nexport const createPermission = permission => api.post(\"/permissions\", permission);\nexport const getPermission = id => api.get(`/permissions/${id}`);\nexport const getAllPermissions = () => api.get(\"/permissions\");\nexport const updatePermission = (id, permission) => api.put(`/permissions/${id}`, permission);\nexport const deletePermission = id => api.delete(`/permissions/${id}`);\nexport const getDocumentPermissions = docId => api.get(`/permissions/document/${docId}`);\nexport const shareDocument = (docId, permissions) => api.post(`/documents/${docId}/share`, permissions);\n\n// ========== ACTIVITY LOG APIs ==========\nexport const createLog = log => api.post(\"/activity-logs\", log);\nexport const getLog = id => api.get(`/activity-logs/${id}`);\nexport const getAllLogs = () => api.get(\"/activity-logs\");\nexport const getMyLogs = () => api.get(\"/activity-logs/my\");\nexport const deleteLog = id => api.delete(`/activity-logs/${id}`);\n\n// ========== ANALYTICS APIs ==========\nexport const getDashboardStats = () => api.get(\"/analytics/dashboard\");\nexport const getStorageStats = () => api.get(\"/analytics/storage\");\nexport const getActivityStats = (period = '7d') => api.get(`/analytics/activity?period=${period}`);\nexport default api;","map":{"version":3,"names":["axios","API_BASE_URL","api","create","baseURL","headers","interceptors","request","use","config","token","localStorage","getItem","Authorization","response","error","_error$response","status","removeItem","window","location","href","Promise","reject","login","credentials","post","register","userData","logout","refreshToken","createUser","user","getUser","id","get","getAllUsers","updateUser","put","deleteUser","delete","getCurrentUser","updateCurrentUser","data","changePassword","createDocument","doc","getMyDocuments","getAllDocuments","getDocumentById","updateDocument","deleteDocument","searchDocuments","query","uploadFile","file","folderId","formData","FormData","append","downloadFile","responseType","createFolder","folder","getFolder","getAllFolders","getMyFolders","updateFolder","deleteFolder","getFolderDocuments","createPermission","permission","getPermission","getAllPermissions","updatePermission","deletePermission","getDocumentPermissions","docId","shareDocument","permissions","createLog","log","getLog","getAllLogs","getMyLogs","deleteLog","getDashboardStats","getStorageStats","getActivityStats","period"],"sources":["E:/DOCUMENT SHARING/827a159d-8cb5-4b0c-a3ae-c6126cce5724-e95b3f4a-3bfb-45da-a11b-d02a0840f98d/reactapp/src/api/api.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst API_BASE_URL = \"http://localhost:8080\"; // adjust if backend runs elsewhere\r\n\r\nconst api = axios.create({\r\n  baseURL: API_BASE_URL,\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n});\r\n\r\n// Attach JWT token if available\r\napi.interceptors.request.use((config) => {\r\n  const token = localStorage.getItem(\"token\");\r\n  if (token) {\r\n    config.headers.Authorization = `Bearer ${token}`;\r\n  }\r\n  return config;\r\n});\r\n\r\n// Response interceptor for error handling\r\napi.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    if (error.response?.status === 401) {\r\n      localStorage.removeItem(\"token\");\r\n      window.location.href = \"/login\";\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// ========== AUTH APIs ==========\r\nexport const login = (credentials) => api.post(\"/auth/login\", credentials);\r\nexport const register = (userData) => api.post(\"/auth/register\", userData);\r\nexport const logout = () => api.post(\"/auth/logout\");\r\nexport const refreshToken = () => api.post(\"/auth/refresh\");\r\n\r\n// ========== USER APIs ==========\r\nexport const createUser = (user) => api.post(\"/users\", user);\r\nexport const getUser = (id) => api.get(`/users/${id}`);\r\nexport const getAllUsers = () => api.get(\"/users\");\r\nexport const updateUser = (id, user) => api.put(`/users/${id}`, user);\r\nexport const deleteUser = (id) => api.delete(`/users/${id}`);\r\nexport const getCurrentUser = () => api.get(\"/users/me\");\r\nexport const updateCurrentUser = (data) => api.put(\"/users/me\", data);\r\nexport const changePassword = (data) => api.put(\"/users/me/password\", data);\r\n\r\n// ========== DOCUMENT APIs ==========\r\nexport const createDocument = (doc) => api.post(\"/documents\", doc);\r\nexport const getMyDocuments = () => api.get(\"/documents/my\");\r\nexport const getAllDocuments = () => api.get(\"/documents\");\r\nexport const getDocumentById = (id) => api.get(`/documents/${id}`);\r\nexport const updateDocument = (id, doc) => api.put(`/documents/${id}`, doc);\r\nexport const deleteDocument = (id) => api.delete(`/documents/${id}`);\r\nexport const searchDocuments = (query) => api.get(`/documents/search?q=${query}`);\r\n\r\n// Upload file (multipart/form-data)\r\nexport const uploadFile = (file, folderId = null) => {\r\n  const formData = new FormData();\r\n  formData.append(\"file\", file);\r\n  if (folderId) {\r\n    formData.append(\"folderId\", folderId);\r\n  }\r\n  return api.post(\"/documents/upload\", formData, {\r\n    headers: { \"Content-Type\": \"multipart/form-data\" },\r\n  });\r\n};\r\n\r\n// Download file (response as Blob)\r\nexport const downloadFile = (id) =>\r\n  api.get(`/documents/download/${id}`, { responseType: \"blob\" });\r\n\r\n// ========== FOLDER APIs ==========\r\nexport const createFolder = (folder) => api.post(\"/folders\", folder);\r\nexport const getFolder = (id) => api.get(`/folders/${id}`);\r\nexport const getAllFolders = () => api.get(\"/folders\");\r\nexport const getMyFolders = () => api.get(\"/folders/my\");\r\nexport const updateFolder = (id, folder) => api.put(`/folders/${id}`, folder);\r\nexport const deleteFolder = (id) => api.delete(`/folders/${id}`);\r\nexport const getFolderDocuments = (id) => api.get(`/folders/${id}/documents`);\r\n\r\n// ========== PERMISSION APIs ==========\r\nexport const createPermission = (permission) => api.post(\"/permissions\", permission);\r\nexport const getPermission = (id) => api.get(`/permissions/${id}`);\r\nexport const getAllPermissions = () => api.get(\"/permissions\");\r\nexport const updatePermission = (id, permission) =>\r\n  api.put(`/permissions/${id}`, permission);\r\nexport const deletePermission = (id) => api.delete(`/permissions/${id}`);\r\nexport const getDocumentPermissions = (docId) => api.get(`/permissions/document/${docId}`);\r\nexport const shareDocument = (docId, permissions) => \r\n  api.post(`/documents/${docId}/share`, permissions);\r\n\r\n// ========== ACTIVITY LOG APIs ==========\r\nexport const createLog = (log) => api.post(\"/activity-logs\", log);\r\nexport const getLog = (id) => api.get(`/activity-logs/${id}`);\r\nexport const getAllLogs = () => api.get(\"/activity-logs\");\r\nexport const getMyLogs = () => api.get(\"/activity-logs/my\");\r\nexport const deleteLog = (id) => api.delete(`/activity-logs/${id}`);\r\n\r\n// ========== ANALYTICS APIs ==========\r\nexport const getDashboardStats = () => api.get(\"/analytics/dashboard\");\r\nexport const getStorageStats = () => api.get(\"/analytics/storage\");\r\nexport const getActivityStats = (period = '7d') => api.get(`/analytics/activity?period=${period}`);\r\n\r\nexport default api;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}